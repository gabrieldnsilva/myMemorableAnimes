<% if (animes && animes.length > 0) { %> <% animes.forEach((anime) => { %>
<div
	class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition"
>
	<div class="relative h-64">
		<img
			src="<%= anime.images?.jpg?.large_image_url || anime.images?.jpg?.image_url || '/images/posters/default-poster.svg' %>"
			alt="<%= anime.title %>"
			class="w-full h-full object-cover"
		/>
	</div>
	<div class="p-4">
		<h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2">
			<%= anime.title %>
		</h3>
		<div class="flex items-center gap-2 text-sm text-gray-600 mb-3">
			<% if (anime.year) { %>
			<span class="px-2 py-1 bg-gray-100 rounded">
				<%= anime.year %>
			</span>
			<% } %> <% if (anime.score) { %>
			<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded">
				⭐ <%= anime.score %>
			</span>
			<% } %>
		</div>
		<p class="text-sm text-gray-600 line-clamp-3 mb-4">
			<%= anime.synopsis || 'Sem sinopse disponível.' %>
		</p>
		<div class="flex gap-2">
			<% if (user) { %>
			<button
				hx-post="/api/animes/<%= anime.mal_id %>/add"
				hx-swap="outerHTML"
				class="flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm"
			>
				Adicionar à Lista
			</button>
			<% } else { %>
			<a
				href="/login"
				class="flex-1 text-center px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm"
			>
				Faça login
			</a>
			<% } %>
			<a
				href="/anime/<%= anime.mal_id %>"
				class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 transition text-sm"
			>
				Ver Detalhes
			</a>
		</div>
	</div>
</div>
<% }) %> <% } else { %>
<div class="col-span-full text-center text-gray-500 py-12">
	<svg
		class="mx-auto h-12 w-12 text-gray-400 mb-4"
		fill="none"
		stroke="currentColor"
		viewBox="0 0 24 24"
	>
		<path
			stroke-linecap="round"
			stroke-linejoin="round"
			stroke-width="2"
			d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
		/>
	</svg>
	<p class="text-lg font-semibold mb-2">Nenhum resultado encontrado</p>
	<p class="text-sm text-gray-500">Tente buscar com outro termo</p>
</div>
<% } %>
