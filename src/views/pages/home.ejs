<section class="relative">
	<!-- Hero Background (naruto como exemplo) -->
	<div class="absolute inset-0 -z-10">
		<img
			src="/src/assets/images/backgrounds/narutoShippuden-background.webp"
			alt="Background Naruto"
			class="w-full h-full object-cover opacity-40"
		/>
		<div
			class="absolute inset-0 bg-gradient-to-b from-transparent to-black/60"
		></div>
	</div>

	<div class="container mx-auto px-4 py-8">
		<header class="mb-8">
			<h1 class="text-3xl md:text-4xl font-bold text-white">
				Catálogo de Animes
			</h1>
			<p class="text-gray-200">
				Explore, favorite e gerencie sua lista pessoal.
			</p>
		</header>

		<!-- Carousel básico com Alpine (placeholders) -->
		<div x-data="carousel()" class="relative">
			<div class="overflow-hidden">
				<div
					class="flex transition-transform duration-500"
					:style="`transform: translateX(-${current * 100}%)`"
				>
					<% animes.forEach((anime) => { %>
					<div class="min-w-full flex justify-center p-4">
						<div class="card max-w-md">
							<img
								src="/src/assets/images/posters/<%= anime.poster || 'narutoShippuden-poster.webp' %>"
								alt="<%= anime.title %>"
								class="w-full h-96 object-cover"
							/>
							<div class="p-6">
								<h3 class="text-xl font-semibold">
									<%= anime.title %>
								</h3>
								<p class="text-gray-700 mt-2 line-clamp-3">
									<%= anime.synopsis || 'Sinopse breve do
									anime...' %>
								</p>
								<div class="mt-4 flex space-x-2">
									<% if (user) { %>
									<button class="btn-primary">
										Adicionar à Lista
									</button>
									<button class="btn-secondary">
										Favoritar
									</button>
									<% } else { %>
									<a href="/login" class="btn-secondary"
										>Faça login para adicionar</a
									>
									<% } %>
								</div>
							</div>
						</div>
					</div>
					<% }) %>
				</div>
			</div>

			<!-- Prev/Next -->
			<button
				@click="prev()"
				class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-3 rounded-full"
			>
				◀
			</button>
			<button
				@click="next()"
				class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-3 rounded-full"
			>
				▶
			</button>

			<!-- Indicators -->
			<div class="flex justify-center space-x-2 mt-4">
				<% animes.forEach((_, i) => { %>
				<button
					@click="go(i)"
					:class="current === <%= i %> ? 'bg-accent-500' : 'bg-gray-400'"
					class="w-3 h-3 rounded-full"
				></button>
				<% }) %>
			</div>
		</div>

		<script id="animes-meta" type="application/json">
			<%- JSON.stringify({ total: animes.length }) %>
		</script>
		<script>
			function carousel() {
				const metaEl = document.getElementById("animes-meta");
				const meta = metaEl
					? JSON.parse(metaEl.textContent)
					: { total: 0 };
				return {
					current: 0,
					total: meta.total,
					next() {
						this.current = (this.current + 1) % this.total;
					},
					prev() {
						this.current =
							(this.current - 1 + this.total) % this.total;
					},
					go(i) {
						this.current = i;
					},
				};
			}
		</script>
	</div>
</section>
